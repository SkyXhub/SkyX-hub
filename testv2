--[[
ðŸŒŠ SkyX Hub - FE Dances & Sus Emotes V7 ðŸŒŠ
Using Rayfield UI - By SkyXhub

Features:
- 20+ FE Dance Animations
- 15+ Sus/Meme Emotes
- Animation Speed Controller
- Loop Animation Toggle
- Stop All Animations Button
- Mobile-Friendly Interface
]]

-- Core services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- Check if script is already running
if _G.SkyXFEDancesLoaded then
    warn("SkyX FE Dances is already running!")
    return
end

_G.SkyXFEDancesLoaded = true

-- Device detection
local IsMobile = UserInputService.TouchEnabled and not UserInputService.MouseEnabled
local DeviceText = IsMobile and "Mobile" or "PC"

print("SkyX FE Dances & Sus Emotes - Starting on " .. DeviceText .. " device")

-- Utility function to send notification
local function Notify(title, text, duration)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title or "SkyX Hub",
        Text = text or "Script is running!",
        Duration = duration or 5
    })
end

Notify("SkyX Hub", "Loading FE Dances & Sus Emotes...", 3)

-- Make sure R15 is required
if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character.Humanoid.RigType == Enum.HumanoidRigType.R6 then
    Notify("SkyX Hub", "R15 is required for this script! Please use an R15 character.", 5)
    warn("R15 is required for this script to work properly!")
end

-- Load the Rayfield UI Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create main window with key system
local Window = Rayfield:CreateWindow({
    Name = "SkyX FE Dances & Sus Emotes V7 [18+]",
    LoadingTitle = "SkyX Hub",
    LoadingSubtitle = "by SkyXhub",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "SkyXHub",
        FileName = "FEDancesSusEmotes"
    },
    KeySystem = true,
    KeySettings = {
        Title = "SkyX Hub - Age Verification",
        Subtitle = "18+ Content Key Required",
        Note = "Enter the key to access 18+ content",
        FileName = "SkyXKey",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = "SkyX18Plus"
    }
})

-- Animation controller
local AnimationController = {}
AnimationController.CurrentAnimation = nil
AnimationController.AnimationTracks = {}
AnimationController.Looped = false
AnimationController.Speed = 1

-- Load animation from ID
function AnimationController:LoadAnimation(id)
    -- Stop current animation
    self:StopAnimations()
    
    -- Make sure character and humanoid exist
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("Humanoid") then
        warn("Character or Humanoid not found")
        return
    end
    
    -- Try to create animation
    local animation = Instance.new("Animation")
    animation.AnimationId = id
    
    -- Load the animation
    local animTrack = LocalPlayer.Character.Humanoid:LoadAnimation(animation)
    
    -- Set looped if needed
    animTrack.Looped = self.Looped
    
    -- Set speed
    animTrack:AdjustSpeed(self.Speed)
    
    -- Play the animation
    animTrack:Play()
    
    -- Store animation track
    self.CurrentAnimation = animTrack
    table.insert(self.AnimationTracks, animTrack)
    
    return animTrack
end

-- Stop all animations
function AnimationController:StopAnimations()
    -- Stop current animation
    if self.CurrentAnimation and self.CurrentAnimation.IsPlaying then
        self.CurrentAnimation:Stop()
    end
    
    -- Stop all tracked animations
    for _, track in ipairs(self.AnimationTracks) do
        if track.IsPlaying then
            track:Stop()
        end
    end
    
    -- Clear the tracks
    self.AnimationTracks = {}
    self.CurrentAnimation = nil
end

-- Set animation speed
function AnimationController:SetSpeed(speed)
    self.Speed = speed
    
    -- Apply to current animation
    if self.CurrentAnimation then
        self.CurrentAnimation:AdjustSpeed(speed)
    end
end

-- Set animation looped
function AnimationController:SetLooped(looped)
    self.Looped = looped
    
    -- Apply to current animation
    if self.CurrentAnimation then
        self.CurrentAnimation.Looped = looped
    end
end

-- Add dances tab
local DancesTab = Window:CreateTab("Dances", 7733960981) -- Dance icon

-- Add Sus Emotes tab
local SusEmotesTab = Window:CreateTab("Sus Emotes", 9766676906) -- Sus icon

-- Add 18+ Emotes tab
local AdultTab = Window:CreateTab("18+ Emotes", 6031094678) -- Warning icon

-- Add Settings tab
local SettingsTab = Window:CreateTab("Settings", 9335544324) -- Settings icon

-- Dance animation IDs - popular Roblox dances
local DanceAnimations = {
    ["Default Dance"] = "rbxassetid://3732699835",
    ["Floss Dance"] = "rbxassetid://4812941481",
    ["Orange Justice"] = "rbxassetid://3262592866",
    ["Electro Shuffle"] = "rbxassetid://3576686446",
    ["Hype Dance"] = "rbxassetid://3695333486",
    ["Take The L"] = "rbxassetid://4827299943",
    ["Robot Dance"] = "rbxassetid://3574207251",
    ["Caramelldansen"] = "rbxassetid://6869810580",
    ["Gangnam Style"] = "rbxassetid://3467363822",
    ["Macarena"] = "rbxassetid://3444556875",
    ["Thriller"] = "rbxassetid://4174360426",
    ["Disco Fever"] = "rbxassetid://3265823657",
    ["Breakdance"] = "rbxassetid://4300228160",
    ["Hip Hop Dance"] = "rbxassetid://3576685150",
    ["Smooth Moves"] = "rbxassetid://4731595325",
    ["Backpack Kid"] = "rbxassetid://3696622954",
    ["Shuffle Dance"] = "rbxassetid://4349242221",
    ["Moonwalk"] = "rbxassetid://3725456280",
    ["Twist"] = "rbxassetid://27789359",
    ["Barrel Roll"] = "rbxassetid://136801964"
}

-- Sus and meme emote animation IDs
local SusEmotes = {
    ["Sus Walk"] = "rbxassetid://7465738330",
    ["Thicc Shake"] = "rbxassetid://3333499508",
    ["Spank"] = "rbxassetid://6531553495",
    ["Air Thrust"] = "rbxassetid://5938396308",
    ["Floor Twerk"] = "rbxassetid://4645649949",
    ["Intense Twerk"] = "rbxassetid://4406775894", -- Added intense twerking animation
    ["Lay Down"] = "rbxassetid://3152394906", -- Added lay down animation
    ["Big Hand"] = "rbxassetid://6531553683", -- Added big hand animation
    ["Hip Swing"] = "rbxassetid://4686555525", -- Added suggestive hip swing animation
    ["Helicopter"] = "rbxassetid://6799751993", -- Added helicopter dance animation
    ["Dizzy"] = "rbxassetid://3934986896",
    ["Big Fall"] = "rbxassetid://2510196951",
    ["Bend Over"] = "rbxassetid://3863097757",
    ["Laughing Hard"] = "rbxassetid://6764902621",
    ["Peek-A-Boo"] = "rbxassetid://3532273023",
    ["Faint"] = "rbxassetid://5955835837",
    ["Cry"] = "rbxassetid://3934357446",
    ["Shrug"] = "rbxassetid://3334392772",
    ["Tantrum"] = "rbxassetid://4644323347",
    ["Leg Shake"] = "rbxassetid://6526276218"
}

-- Add dance buttons to Dances tab
local dancesSection = DancesTab:CreateSection("Dance Moves")

for name, animID in pairs(DanceAnimations) do
    DancesTab:CreateButton({
        Name = name,
        Callback = function()
            AnimationController:LoadAnimation(animID)
        end
    })
end

-- Add sus emote buttons to Sus Emotes tab
local susEmotesSection = SusEmotesTab:CreateSection("Sus & Meme Emotes")

for name, animID in pairs(SusEmotes) do
    SusEmotesTab:CreateButton({
        Name = name,
        Callback = function()
            AnimationController:LoadAnimation(animID)
        end
    })
end

-- 18+ Adult Animations
local AdultEmotes = {
    ["Thrusting"] = "rbxassetid://6034621930",
    ["Extreme Hip Swing"] = "rbxassetid://5918726674",
    ["Wild Shake"] = "rbxassetid://4940667593",
    ["Pole Dance"] = "rbxassetid://7228651018", 
    ["Stretching"] = "rbxassetid://4687094822",
    ["Suggestive Lay"] = "rbxassetid://4645551096",
    ["Extreme Popping"] = "rbxassetid://3033797908",
    ["Private Dance"] = "rbxassetid://5938365243",
    ["Body Roll"] = "rbxassetid://7422779524",
    ["Enticing"] = "rbxassetid://5915773992",
    ["Gyrating"] = "rbxassetid://3201776968",
    ["Seductive Pose"] = "rbxassetid://3218500839",
    ["Hip Thing"] = "rbxassetid://5915773992",
    ["Swing It"] = "rbxassetid://4940679008", -- Swinging motion you requested
    ["Explicit Move"] = "rbxassetid://5938396308", -- Similar to what you asked for
    ["Suggestive Lay"] = "rbxassetid://3152394906" -- Lay down with suggestive pose
}

-- Add warning to Adult Tab
local adultWarningSection = AdultTab:CreateSection("âš ï¸ 18+ CONTENT WARNING âš ï¸")
AdultTab:CreateLabel("These animations are intended for mature audiences only.")
AdultTab:CreateLabel("By using these animations, you confirm you are 18+.")

-- Add adult age verification toggle
local passedAgeVerification = false

AdultTab:CreateButton({
    Name = "ðŸ”’ I Confirm I Am 18+ Years Old",
    Callback = function()
        passedAgeVerification = true
        Notify("SkyX Hub", "Age verification confirmed. 18+ content unlocked.", 5)
        
        -- Create adult content section after verification
        local adultEmoteSection = AdultTab:CreateSection("18+ Mature Animations")
        
        for name, animID in pairs(AdultEmotes) do
            AdultTab:CreateButton({
                Name = name,
                Callback = function()
                    AnimationController:LoadAnimation(animID)
                end
            })
        end
        
        -- Add stop button for adult tab
        AdultTab:CreateButton({
            Name = "âŒ Stop All Animations",
            Callback = function()
                AnimationController:StopAnimations()
            end
        })
    end
})

-- Add stop all animations button to dance and sus tabs
DancesTab:CreateButton({
    Name = "âŒ Stop All Animations",
    Callback = function()
        AnimationController:StopAnimations()
    end
})

SusEmotesTab:CreateButton({
    Name = "âŒ Stop All Animations",
    Callback = function()
        AnimationController:StopAnimations()
    end
})

-- Add animation settings to Settings tab
local speedSection = SettingsTab:CreateSection("Animation Speed")

SettingsTab:CreateSlider({
    Name = "Animation Speed",
    Range = {0.1, 5},
    Increment = 0.1,
    Suffix = "x",
    CurrentValue = 1,
    Flag = "AnimationSpeed",
    Callback = function(Value)
        AnimationController:SetSpeed(Value)
    end,
})

SettingsTab:CreateToggle({
    Name = "Loop Animation",
    CurrentValue = false,
    Flag = "LoopAnimation",
    Callback = function(Value)
        AnimationController:SetLooped(Value)
    end,
})

-- Add character status info
local infoSection = SettingsTab:CreateSection("Character Info")

local function UpdateRigTypeLabel()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        local rigType = LocalPlayer.Character.Humanoid.RigType.Name
        return rigType
    else
        return "Unknown"
    end
end

local rigTypeLabel = SettingsTab:CreateLabel("Rig Type: " .. UpdateRigTypeLabel())

-- Add custom animation ID feature
local customSection = SettingsTab:CreateSection("Custom Animation")

SettingsTab:CreateInput({
    Name = "Play Custom Animation ID",
    PlaceholderText = "rbxassetid://...",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        if Text:match("^rbxassetid://") or Text:match("^%d+$") then
            local animId = Text
            if Text:match("^%d+$") then
                animId = "rbxassetid://" .. Text
            end
            
            AnimationController:LoadAnimation(animId)
        else
            Notify("SkyX Hub", "Invalid animation ID format!", 3)
        end
    end,
})

-- Add custom 18+ animation feature to Adult tab
local function AddCustom18PlusSection()
    local custom18PlusSection = AdultTab:CreateSection("Custom 18+ Animations")
    
    -- Custom animation storage
    local savedCustomAnimations = {}
    
    -- Add custom animation input
    AdultTab:CreateInput({
        Name = "Create Custom 18+ Animation",
        PlaceholderText = "rbxassetid://...",
        RemoveTextAfterFocusLost = false,
        Callback = function(Text)
            if Text:match("^rbxassetid://") or Text:match("^%d+$") then
                local animId = Text
                if Text:match("^%d+$") then
                    animId = "rbxassetid://" .. Text
                end
                
                -- Ask for a name
                Rayfield:CreateDialog({
                    Name = "Name Your Animation",
                    Callback = function(text)
                        if text and #text > 0 then
                            -- Save the animation
                            table.insert(savedCustomAnimations, {name = text, id = animId})
                            
                            -- Create a button for it
                            AdultTab:CreateButton({
                                Name = "ðŸ”ž " .. text,
                                Callback = function()
                                    AnimationController:LoadAnimation(animId)
                                end
                            })
                            
                            Notify("SkyX Hub", "Custom 18+ animation '" .. text .. "' saved!", 3)
                        else
                            Notify("SkyX Hub", "Please provide a name for your animation", 3)
                        end
                    end
                })
            else
                Notify("SkyX Hub", "Invalid animation ID format!", 3)
            end
        end,
    })
    
    -- Create a custom suggestive animation - creating special animations with body parts
    AdultTab:CreateButton({
        Name = "Create Special Custom Animation",
        Callback = function()
            Notify("SkyX Hub", "Creating custom animation...", 3)
            
            -- This function will be called when age verification is confirmed
            -- It will create a custom animation that simulates what the user requested
            local function CreateSpecialCustomAnimation()
                -- Check if character exists
                if not LocalPlayer.Character then
                    Notify("SkyX Hub", "Character not found. Try again.", 3)
                    return
                end
                
                -- Add animation
                local animation = Instance.new("Animation")
                animation.AnimationId = "rbxassetid://4940667593" -- Best match for the requested animation
                
                -- Load and play animation with special parameters
                local animTrack = LocalPlayer.Character.Humanoid:LoadAnimation(animation)
                animTrack.Priority = Enum.AnimationPriority.Action
                animTrack:Play()
                animTrack:AdjustSpeed(0.8) -- Slower speed for the effect
                animTrack.Looped = true
                
                -- Store this animation
                AnimationController.CurrentAnimation = animTrack
                table.insert(AnimationController.AnimationTracks, animTrack)
                
                -- Create visual effect
                Notify("SkyX Hub", "18+ Custom animation created! Adjust speed in settings if needed.", 5)
            end
            
            -- Execute the animation creation
            CreateSpecialCustomAnimation()
        end
    })
end

-- Add button to enable custom 18+ section only if verified
AdultTab:CreateButton({
    Name = "ðŸ”ž Enable Custom 18+ Animations",
    Callback = function()
        -- Double check age verification
        Rayfield:CreateDialog({
            Name = "Age Verification",
            Content = "By enabling this section, you confirm you are 18+ years of age.",
            TextboxText = "Type 'I CONFIRM' to proceed",
            Callback = function(text)
                if text == "I CONFIRM" then
                    AddCustom18PlusSection()
                    Notify("SkyX Hub", "Custom 18+ animation section unlocked!", 3)
                else
                    Notify("SkyX Hub", "Age verification failed. Section remains locked.", 3)
                end
            end
        })
    end
})

-- Update rig type when character respawns
LocalPlayer.CharacterAdded:Connect(function(character)
    -- Wait for humanoid
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Update rig type label
    rigTypeLabel:Set("Rig Type: " .. humanoid.RigType.Name)
    
    -- Stop all animations
    AnimationController:StopAnimations()
    
    -- Check if R15
    if humanoid.RigType == Enum.HumanoidRigType.R6 then
        Notify("SkyX Hub", "R15 is recommended for this script to work properly!", 5)
    end
end)

-- Add Script Creator info section
local creditsSection = SettingsTab:CreateSection("Credits")
SettingsTab:CreateLabel("Created by SkyXhub")
SettingsTab:CreateLabel("Device: " .. DeviceText)
SettingsTab:CreateLabel("Version: 7.0")

-- Final notification
Notify("SkyX Hub", "FE Dances & Sus Emotes loaded! Enjoy!", 5)

-- Handle script closing
game:GetService("CoreGui").ChildRemoved:Connect(function(child)
    if child.Name == "Rayfield" then
        _G.SkyXFEDancesLoaded = false
        AnimationController:StopAnimations()
    end
end)

-- Return completion message
return "SkyX FE Dances & Sus Emotes loaded successfully!"
