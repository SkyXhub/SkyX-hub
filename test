--[[
    ðŸŒŠ SkyX Hub - MM2 Modern Script ðŸŒŠ
    ULTRA MODERN VERSION 5.0
    
    Features:
    - Brand new sleek UI design with smooth animations
    - Dark, ultra-modern aesthetic with customized controls
    - Optimized performance and mobile compatibility
    - All original MM2 features in a more elegant package
    
    Optimized for mobile executors (Swift, Fluxus, KRNL, Delta, etc.)
]]

-- Check for valid Roblox environment
local success, services = pcall(function()
    local Players = game:GetService("Players") 
    local Workspace = game:GetService("Workspace")
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")
    local TweenService = game:GetService("TweenService")
    
    local LocalPlayer = Players.LocalPlayer
    local Camera = Workspace.CurrentCamera
    local Mouse = LocalPlayer:GetMouse()
    
    return {
        Players = Players,
        Workspace = Workspace,
        RunService = RunService,
        UserInputService = UserInputService,
        TweenService = TweenService,
        LocalPlayer = LocalPlayer,
        Camera = Camera,
        Mouse = Mouse
    }
end)

if not success then
    print("Not running in proper Roblox environment")
    print("This script should only be executed in a Roblox game environment")
    return
end

-- Extract services for easier access
local Players = services.Players
local Workspace = services.Workspace
local RunService = services.RunService
local UserInputService = services.UserInputService
local TweenService = services.TweenService
local LocalPlayer = services.LocalPlayer
local Camera = services.Camera
local Mouse = services.Mouse

-- Prevent duplicate execution
if _G.SkyXMM2Loaded then
    print("SkyX MM2 Script is already running")
    return
end
_G.SkyXMM2Loaded = true

-- Load SkyX Modern UI Library
local SkyXModern = loadstring(game:HttpGet('https://raw.githubusercontent.com/SkyXhub/SkyX-hub/refs/heads/main/SkyX%20UI%20Library.lua'))()

-- Create window
local Window = SkyXModern:CreateWindow({
    Name = "SkyX Hub - MM2",
    LoadingTitle = "SkyX Hub",
    LoadingSubtitle = "Murder Mystery 2 Script",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "SkyXHub",
        FileName = "MM2Config"
    },
    Theme = {
        -- Main background colors
        BackgroundColor = Color3.fromRGB(18, 18, 24),
        SidebarColor = Color3.fromRGB(24, 24, 34),
        ContainerColor = Color3.fromRGB(30, 30, 40),
        
        -- Accent and highlight colors
        HighlightColor = Color3.fromRGB(80, 120, 255),    -- Bright blue accent
        
        -- Text colors
        TextColor = Color3.fromRGB(240, 240, 245),       -- Almost white text
        SubTextColor = Color3.fromRGB(180, 180, 190),    -- Light gray secondary text
        HeadingColor = Color3.fromRGB(255, 255, 255),    -- Pure white headings
        
        -- UI component colors
        ButtonColor = Color3.fromRGB(40, 40, 55),         -- Base button color
        ButtonHoverColor = Color3.fromRGB(50, 50, 70),    -- Button hover state
        
        -- Toggle and slider colors
        ToggleOffColor = Color3.fromRGB(60, 60, 80),      -- Toggle in off state
        ToggleOnColor = Color3.fromRGB(80, 120, 255),     -- Toggle in on state
        SliderBackgroundColor = Color3.fromRGB(40, 40, 60), -- Slider track
        SliderFilledColor = Color3.fromRGB(80, 120, 255),  -- Filled part of slider
        
        -- Other UI elements
        BorderColor = Color3.fromRGB(50, 50, 70),        -- Border for containers
        TabColor = Color3.fromRGB(30, 30, 45),           -- Tab button color
        TabActiveColor = Color3.fromRGB(80, 120, 255),   -- Selected tab color
        InputBackgroundColor = Color3.fromRGB(30, 30, 45), -- Input field background
        DropdownColor = Color3.fromRGB(30, 30, 45),        -- Dropdown menu color
        
        -- Status colors
        ErrorColor = Color3.fromRGB(255, 85, 85),        -- Error red
        SuccessColor = Color3.fromRGB(85, 255, 127),     -- Success green
        WarningColor = Color3.fromRGB(255, 185, 85)      -- Warning yellow/orange
    }
})

-- Create tabs with modern icons
local MainTab = Window:CreateTab({
    Name = "Main",
    Icon = "rbxassetid://7733658133" -- Dashboard icon
})

local ESPTab = Window:CreateTab({
    Name = "ESP",
    Icon = "rbxassetid://7733911690" -- Vision/eye icon
})

local TeleportsTab = Window:CreateTab({
    Name = "Teleport",
    Icon = "rbxassetid://7734053495" -- Location/map icon
})

local PlayerTab = Window:CreateTab({
    Name = "Player",
    Icon = "rbxassetid://7743877054" -- Person icon
})

local SettingsTab = Window:CreateTab({
    Name = "Settings",
    Icon = "rbxassetid://7734053495" -- Gear icon
})

-- Create main tab content
local GameSection = MainTab:CreateSection("Game Features")

-- Add toggles and buttons
local ESPToggle = GameSection:CreateToggle({
    Name = "Show ESP",
    Default = false,
    Callback = function(Value)
        print("ESP Toggled:", Value)
    end
})

local CoinCollectorToggle = GameSection:CreateToggle({
    Name = "Auto Collect Coins",
    Default = false,
    Callback = function(Value)
        print("Auto Collect Coins Toggled:", Value)
    end
})

local MurderDetectionToggle = GameSection:CreateToggle({
    Name = "Murder Detection",
    Default = false,
    Callback = function(Value)
        print("Murder Detection Toggled:", Value)
    end
})

local RefreshButton = GameSection:CreateButton({
    Name = "Refresh Players",
    Callback = function()
        print("Refreshing players...")
    end
})

-- Create game status section
local StatusSection = MainTab:CreateSection("Game Status")

-- Create ESP tab content
local ESPSettingsSection = ESPTab:CreateSection("ESP Settings")

local ShowNamesToggle = ESPSettingsSection:CreateToggle({
    Name = "Show Names",
    Default = true,
    Callback = function(Value)
        print("Show Names:", Value)
    end
})

local ShowRolesToggle = ESPSettingsSection:CreateToggle({
    Name = "Show Roles",
    Default = true,
    Callback = function(Value)
        print("Show Roles:", Value)
    end
})

local ShowDistanceToggle = ESPSettingsSection:CreateToggle({
    Name = "Show Distance",
    Default = true,
    Callback = function(Value)
        print("Show Distance:", Value)
    end
})

local ESPColorSection = ESPTab:CreateSection("ESP Colors")

-- Create teleport tab content
local TeleportSection = TeleportsTab:CreateSection("Map Teleports")

local LobbyButton = TeleportSection:CreateButton({
    Name = "Teleport to Lobby",
    Callback = function()
        print("Teleporting to Lobby...")
    end
})

local MapButton = TeleportSection:CreateButton({
    Name = "Teleport to Map",
    Callback = function()
        print("Teleporting to Map...")
    end
})

-- Player tab content
local PlayerSection = PlayerTab:CreateSection("Player Settings")

local WalkspeedSlider = PlayerSection:CreateSlider({
    Name = "Walk Speed",
    Min = 16,
    Max = 100,
    Default = 16,
    Increment = 1,
    Callback = function(Value)
        print("Walk Speed set to:", Value)
    end
})

local JumpPowerSlider = PlayerSection:CreateSlider({
    Name = "Jump Power",
    Min = 50,
    Max = 200,
    Default = 50,
    Increment = 1,
    Callback = function(Value)
        print("Jump Power set to:", Value)
    end
})

local NoclipToggle = PlayerSection:CreateToggle({
    Name = "Noclip",
    Default = false,
    Callback = function(Value)
        print("Noclip Toggled:", Value)
    end
})

local FlyToggle = PlayerSection:CreateToggle({
    Name = "Fly",
    Default = false,
    Callback = function(Value)
        print("Fly Toggled:", Value)
    end
})

-- Create miscellaneous section for teleport tab
local MiscSection = TeleportsTab:CreateSection("Player Teleports")

local PlayerDropdown = MiscSection:CreateDropdown({
    Name = "Select Player",
    Options = {"None"},
    Default = "None",
    Callback = function(Value)
        print("Selected Player:", Value)
    end
})

local TeleportToPlayerButton = MiscSection:CreateButton({
    Name = "Teleport to Player",
    Callback = function()
        print("Teleporting to selected player...")
    end
})

-- Settings tab content
local SettingsSection = SettingsTab:CreateSection("UI Settings")

local UnloadButton = SettingsSection:CreateButton({
    Name = "Unload Script",
    Callback = function()
        _G.SkyXMM2Loaded = false
        print("Unloading SkyX Hub MM2...")
    end
})

-- Function to update players list
local function UpdatePlayersList()
    local playerNames = {"None"}
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playerNames, player.Name)
        end
    end
    
    PlayerDropdown:UpdateOptions(playerNames)
end

-- Update players list initially and when players join/leave
UpdatePlayersList()

Players.PlayerAdded:Connect(UpdatePlayersList)
Players.PlayerRemoving:Connect(UpdatePlayersList)

print("SkyX MM2 Modern UI loaded successfully | Press Right Control to toggle UI")
